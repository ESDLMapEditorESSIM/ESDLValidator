{
    "name": "Test validation schema 2",
    "description": "Test validation schema which is used in esdl-validator unit tests",
    "validations": [
        {
            "name": "check_producer_power_cost_or_profile",
            "desciption": "An asset of type producer must have a power attribute (asset.power) with marginal cost specified (asset.costInformation.marginalCosts) OR have an energy profile connected to it's outPort (asset.port.profile)",
            "type": "error",
            "message": "Consumer missing power and marginal costs or no energy profile connected",
            "selects": [
                {
                    "function": "get",
                    "alias": "producers",
                    "args": {
                        "type": "Producer"
                    }
                }
            ],
            "check": {
                "function": "not_null",
                "dataset": "producers",
                "args": {
                    "property": "power",
                    "counts_as_null": [
                        0.0
                    ]
                },
                "and": [
                    {
                        "function": "not_null",
                        "args": {
                            "property": "costinformation.marginalcosts.value",
                            "counts_as_null": [
                                0,
                                0.0
                            ]
                        }
                    }
                ],
                "or": [
                    {
                        "function": "not_null",
                        "args": {
                            "property": "port.profile"
                        }
                    }
                ]
            }
        }
    ]
}